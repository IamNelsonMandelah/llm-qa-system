(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(5155),r=a(2115);function l(){let[e,t]=(0,r.useState)(""),[a,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)(!1),[m,g]=(0,r.useState)([]),[x,h]=(0,r.useState)(null),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=localStorage.getItem("chat_sessions");e&&g(JSON.parse(e)),"dark"===localStorage.getItem("theme")&&(u(!0),document.documentElement.classList.add("dark"))},[]),(0,r.useEffect)(()=>{var e;null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})},[a]),(0,r.useEffect)(()=>{localStorage.setItem("chat_sessions",JSON.stringify(m))},[m]),(0,r.useEffect)(()=>{x||0!==m.length||f()},[m,x]);let f=()=>{let e={id:Date.now().toString(),title:"Chat on ".concat(new Date().toLocaleString()),messages:[],createdAt:new Date().toISOString()};g(t=>[...t,e]),h(e.id),l([])},p=e=>{g(t=>t.map(t=>t.id===x?{...t,messages:e}:t))},w=async s=>{if(s.preventDefault(),!e.trim())return;let r=[...a,{role:"user",content:e,timestamp:new Date().toISOString()}];l(r),p(r),t(""),i(!0),d(null);try{let t=await fetch("http://127.0.0.1:8000/api/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})}),a=await t.json();if(t.ok){let e={role:"ai",content:a.answer,timestamp:a.timestamp_responded},t=[...r,e];l(t),p(t)}else d(a.detail||"Something went wrong.")}catch(e){d("Server not reachable.")}finally{i(!1)}};return(0,s.jsxs)("main",{className:"min-h-screen flex flex-col md:flex-row bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white",children:[(0,s.jsxs)("aside",{className:"w-full md:w-64 border-r border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 p-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"My Chats"}),(0,s.jsx)("button",{onClick:f,className:"text-sm bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"New"})]}),(0,s.jsx)("ul",{className:"space-y-2",children:m.map(e=>(0,s.jsx)("li",{onClick:()=>(e=>{let t=m.find(t=>t.id===e);t&&(l(t.messages),h(t.id))})(e.id),className:"cursor-pointer p-2 rounded hover:bg-blue-100 dark:hover:bg-blue-800 ".concat(e.id===x?"bg-blue-200 dark:bg-blue-700":""),children:(0,s.jsx)("div",{className:"text-sm font-medium",children:e.title})},e.id))})]}),(0,s.jsxs)("section",{className:"flex-1 p-4 flex flex-col items-center justify-start",children:[(0,s.jsx)("div",{className:"w-full max-w-3xl flex justify-end mb-2",children:(0,s.jsx)("button",{onClick:()=>{let e=!c;u(e),document.documentElement.classList.toggle("dark",e),localStorage.setItem("theme",e?"dark":"light")},className:"px-3 py-1 text-sm rounded bg-gray-300 dark:bg-gray-700 text-gray-900 dark:text-white hover:opacity-80",children:c?"Dark Mode":"Light Mode"})}),(0,s.jsxs)("div",{className:"w-full max-w-3xl bg-white dark:bg-gray-800 rounded-lg shadow p-4 h-[65vh] overflow-y-auto space-y-3",children:[a.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"p-3 rounded-lg text-sm max-w-[80%] ".concat("user"===e.role?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 dark:text-white"),children:[(0,s.jsx)("p",{children:e.content}),(0,s.jsx)("div",{className:"text-xs mt-1 opacity-60",children:new Date(e.timestamp).toLocaleString()}),"ai"===e.role&&(0,s.jsx)("button",{className:"mt-2 text-xs underline text-blue-700 dark:text-blue-300",onClick:()=>{var t;return t=e.content,void navigator.clipboard.writeText(t)},children:"Copy"})]})},t)),(0,s.jsx)("div",{ref:b})]}),(0,s.jsxs)("form",{onSubmit:w,className:"w-full max-w-3xl mt-4 flex gap-2 flex-col sm:flex-row",children:[(0,s.jsx)("textarea",{className:"flex-grow p-3 border border-gray-300 dark:border-gray-600 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-900 dark:text-white",placeholder:"Ask your question...",rows:3,value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)("button",{type:"submit",disabled:n,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:n?"Thinking...":"Ask AI"})]}),o&&(0,s.jsx)("div",{className:"mt-4 text-red-600 font-medium",children:o})]})]})}},5044:(e,t,a)=>{Promise.resolve().then(a.bind(a,1057))}},e=>{e.O(0,[441,964,358],()=>e(e.s=5044)),_N_E=e.O()}]);