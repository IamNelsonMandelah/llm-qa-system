(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1057:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5155),r=s(2115);function l(){let[e,t]=(0,r.useState)(""),[s,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[u,g]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[p,b]=(0,r.useState)("light"),[f,w]=(0,r.useState)(null),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;null==(e=y.current)||e.scrollIntoView({behavior:"smooth"})},[s]),(0,r.useEffect)(()=>{let e=localStorage.getItem("chat_history");e&&l(JSON.parse(e))},[]),(0,r.useEffect)(()=>{localStorage.setItem("chat_history",JSON.stringify(s))},[s]);let v=async s=>{s.preventDefault(),g(!0),n(""),c(""),h(""),x(null);try{let s=await fetch("http://127.0.0.1:8000/api/ask",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:e})}),a=await s.json();if("answer"in a){let s={question:e,answer:a.answer,timestamp_received:a.timestamp_received,timestamp_responded:a.timestamp_responded};l(e=>[...e,s]),n(a.answer),c(a.timestamp_received),h(a.timestamp_responded),t("")}else x(a.detail||"Something went wrong.")}catch(e){x("⚠️ Server is not reachable.")}finally{g(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col md:flex-row ".concat("dark"===p?"bg-gray-900 text-white":"bg-gray-100 text-gray-900"," relative"),children:[(0,a.jsxs)("aside",{className:"w-full md:w-1/4 border-r border-gray-700 p-4 space-y-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Chat History"}),0===s.length&&(0,a.jsx)("p",{className:"text-sm",children:"No chats yet."}),(0,a.jsx)("ul",{className:"space-y-2 overflow-auto max-h-96",children:s.map((e,r)=>(0,a.jsxs)("li",{className:"cursor-pointer text-sm p-2 rounded hover:bg-blue-100 dark:hover:bg-gray-800 ".concat(r===f?"bg-blue-200 dark:bg-gray-700":""),onClick:()=>{w(r),n(s[r].answer),c(s[r].timestamp_received),h(s[r].timestamp_responded),t(s[r].question)},children:[e.question.slice(0,40),"..."]},r))})]}),(0,a.jsxs)("main",{className:"flex-1 flex flex-col items-center p-6 space-y-4",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"AI Q&A Assistant"}),(0,a.jsxs)("form",{onSubmit:v,className:"w-full max-w-xl space-y-3",children:[(0,a.jsx)("textarea",{rows:4,className:"w-full p-4 border rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat("dark"===p?"text-white":"text-black"," bg-white dark:bg-gray-800"),placeholder:"Ask your question...",value:e,onChange:e=>t(e.target.value),required:!0}),(0,a.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition",children:u?"Thinking...":"Ask AI"})]}),i&&(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 text-black dark:text-white p-4 rounded-xl shadow w-full max-w-xl space-y-2 relative",children:[(0,a.jsx)("h2",{className:"font-semibold",children:"Answer:"}),(0,a.jsx)("p",{className:"whitespace-pre-wrap",children:i}),(0,a.jsxs)("div",{className:"text-xs text-gray-600 dark:text-gray-300 border-t pt-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Asked:"})," ",new Date(o).toLocaleString()]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Answered:"})," ",new Date(d).toLocaleString()]})]}),(0,a.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(i)},className:"absolute top-2 right-2 text-sm bg-gray-200 dark:bg-gray-600 px-2 py-1 rounded hover:bg-gray-300 dark:hover:bg-gray-500",children:"Copy"})]}),m&&(0,a.jsx)("div",{className:"text-red-600",children:m}),(0,a.jsx)("div",{ref:y})]}),(0,a.jsx)("button",{onClick:()=>{b("light"===p?"dark":"light")},className:"fixed bottom-4 right-4 bg-blue-600 text-white p-3 rounded-full shadow-lg hover:bg-blue-700 transition","aria-label":"Toggle dark mode",title:"Toggle theme",children:"light"===p?"\uD83C\uDF19":"☀️"})]})}},5044:(e,t,s)=>{Promise.resolve().then(s.bind(s,1057))}},e=>{e.O(0,[441,964,358],()=>e(e.s=5044)),_N_E=e.O()}]);